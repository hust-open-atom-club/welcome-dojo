#!/opt/pwn.college/bash

# art from https://emojicombos.com/pokemon-ascii-art
cat <<END | while read LINE; do echo "$LINE"; sleep 0.1; done
⠀⠀⠀⠀⢸⡉⠙⢦⠀⠀⣀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⢠⢤⣈⣇⠀⠈⢳⡀⣟⣹⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⣏⠀⠙⢿⣆⣰⣿⣿⡗⣮⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⢠⣟⢦⠀⠀⠹⣿⡖⣻⣿⣳⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⢸⠀⠙⢷⡄⢀⣿⣯⣳⢿⣯⣿⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠈⣲⣀⠀⠙⢿⣖⡻⣯⣟⣷⣻⣼⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⢸⠉⠛⠷⣄⠀⠹⣵⣻⢿⡾⣽⣷⣳⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠈⢣⣄⠀⠈⢱⡖⣬⣫⡿⣽⣳⢿⡽⣧⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣄⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⡟⠛⠿⣄⡘⢿⡤⣟⣿⣧⣟⣿⣻⡿⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⢿⠃⣀⣼⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠘⢤⡀⠀⠈⢷⠿⣿⣮⣟⣽⡶⣯⢿⣻⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⡞⡡⢎⠳⡍⠙⣦⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠈⡏⠛⠳⠦⠼⣿⣴⡻⣽⢾⣽⡽⢯⣷⣻⣦⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠱⣄⣳⡎⢧⣿⣹⠇⠀⣠⠔⢉⣭⣿⣶⠀⠀⠀⠀⠀⠀⢀⣴⡆⠀
⠀⠀⠀⠘⢦⣄⣀⠀⢴⡲⢿⣯⣟⣾⣽⡻⣶⣻⣽⣳⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣻⡿⢻⣿⣏⣩⣤⣶⣿⠿⠁⠀⠀⠀⠀⠀⠀⣰⣟⣼⣃⣀
⠀⠀⠀⠀⠹⡉⠉⠉⠙⠛⠧⣾⣽⢯⣟⣽⣳⣟⡿⣷⣻⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⢿⡿⣶⡟⠙⠻⠿⠿⠥⢤⡄⠀⠀⠀⠀⣠⣾⣟⠞⠁⣠⡼
⠀⠀⠀⠀⠀⢹⡖⠶⠦⠤⣾⡲⢿⣿⣻⢾⡷⣯⣟⡿⣷⣯⢷⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣿⢯⣟⣽⣻⣿⡶⢦⡽⠞⠋⠀⠀⠀⣠⣾⣿⣟⣿⣾⣋⣩⠇
⠀⠀⠀⠀⠀⠀⠳⣀⠀⠠⠀⠙⢓⣺⣯⣷⡿⣽⣾⣻⣽⣻⣷⣻⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣾⣯⣿⣾⠷⠟⠋⠀⠀⠀⠀⠀⢀⣴⣾⣿⣟⡿⣿⣿⠛⢻⡇⠀
⠀⠀⠀⠀⠀⠀⠀⠈⢹⠛⠛⠛⠻⣜⣳⣭⣿⣷⣯⣷⢯⣷⣻⣷⣟⣷⣄⠀⠀⠀⠀⠀⢀⣴⣍⣤⣴⠋⠀⠀⠀⠀⠀⠀⢀⣠⣶⣿⣿⢿⣷⣿⣿⡛⠥⣴⠞⠁⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⠲⡶⠖⠚⠙⢯⣝⣾⣳⣯⣿⡾⣷⢯⣿⣾⣽⡳⢦⣠⣤⣾⣛⣮⣟⣾⡇⠀⠀⠀⠀⣀⣤⣶⣿⣿⣟⡿⣞⣯⣿⡞⠻⣥⡴⠋⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠑⠢⡤⠖⠈⠉⠻⣵⣻⣾⣽⣿⣻⢾⡽⣷⣟⣷⡻⣟⣾⡽⣾⣿⣯⣀⣤⣴⣶⣿⣿⢯⣟⡿⣾⡽⣿⡽⣿⠚⣿⡤⠞⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⢲⡖⠉⠀⣀⠙⠻⡼⢷⣿⢯⡿⠟⠻⠾⣽⣻⢾⣟⣿⣿⣿⣿⣿⣿⣟⡿⣞⣯⣿⣽⣻⣿⣽⡙⢹⡦⠞⠁⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠻⣏⠁⢀⡠⠂⠈⡹⠋⠀⠀⠀⠀⠈⢻⣯⢿⣿⣿⣿⣿⣿⣻⣯⣿⣿⣿⠾⠛⢉⣇⣤⠟⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢙⣯⢄⠤⠊⠀⠀⠀⠀⠀⠀⠀⠀⠙⠟⢻⣿⣷⣻⣷⡿⠿⣓⢋⣆⣴⠷⠛⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣸⠁⠀⡠⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣿⠋⢩⣏⣠⡧⠶⠟⠋⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⡴⠃⠀⠀⠀⢰⠀⠀⠀⠀⠀⠀⢀⡾⠛⠋⠉⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⢀⣤⣚⣭⡭⣭⢽⠻⡟⠶⢶⣿⣥⣶⣾⢦⣀⡾⠁⠀⠀⠀⢀⣴⡟⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⣤⡔⠒⠉⠉⣼⡏⠀⠐⠐⣮⣵⣾⠓⣾⣿⣿⣿⣿⣿⣿⣷⠀⠀⢠⣶⠛⣾⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⣤⠒⠉⠀⣀⠴⠖⠋⠉⢳⣲⣾⣿⡽⢷⣾⠿⣛⣻⣿⣿⣿⣿⣿⠷⣿⣾⣿⣾⣿⣥⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⢳⣤⠔⠊⠀⢀⣠⣴⣚⠿⠛⣉⠶⢚⡍⢆⣳⠟⣩⡟⣿⣫⢹⡃⠀⢸⣿⣿⣿⣿⣶⣿⣧⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⢯⣤⠴⢊⡹⠟⠋⠁⣰⠟⠁⡀⣫⡼⡛⣥⣾⠛⣔⡿⣟⢸⠅⠀⠀⠉⠙⠿⣿⠿⠿⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⣠⠔⠉⠀⠀⠀⣠⣿⣲⠟⠋⡵⢡⣷⡿⢃⡍⣼⢱⡏⣼⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⢧⣤⣀⡤⠖⣻⠿⠋⠁⠀⢈⣴⢿⡟⠀⣁⡾⠁⡾⢀⡏⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠉⠀⣠⠞⠁⠀⠀⠀⣨⡿⠃⢀⣿⡼⠋⢠⡼⠓⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠐⡟⠀⠀⢀⣠⠞⠁⠀⢀⣾⠏⠁⢀⠎⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠙⠛⠒⣿⣁⣀⣠⢾⣻⣇⡤⡶⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
欢迎来到 pwn.hust.college，请确认使用 SSH 运行挑战关卡！
END

echo -n "检查中..."
for i in {1..10}
do
    echo -n "."
    sleep 0.1
done
echo -n $'\r'

if [ -n "$TERM" ] && [ "$TERM" = "xterm" ]
then
    echo "通过！ 你确实在SSH内运行挑战关卡！"
    echo -n "你的 flag 是："
    cat /flag
else
	cat <<END

1. 在本地终端程序中输入 ssh-keygen -f 指定文件路径 -N "" 生成 key 和 key.pub 公私钥对，或用其他软件生成和公私钥对；
2. 将公钥 key.pub 中内容复制出来；
3. 点击导航栏右侧的设置选项，点击左边 SSH 公钥，将复制的公钥填写进去，点击 Update 保存自己的公钥；
4. 在本地终端程序中输入 ssh -i 你的私钥地址 hacker@pwn.cse.hust.edu.cn，即可连接到挑战关卡容器，然后运行挑战程序；

END
	echo "请确认在 SSH 运行挑战关卡，而不是桌面或 VSCode 工作空间 ！"
fi